(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},1:function(e,t){},2:function(e,t){},"7RL8":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("i8i4"),c=n.n(o),l=n("o0o1"),s=n.n(l),i=n("yXPU"),u=n.n(i),f=n("lwsE"),p=n.n(f),h=n("W8MJ"),m=n.n(h),d=n("7W2i"),v=n.n(d),y=n("a1gu"),g=n.n(y),b=n("Nsbk"),w=n.n(b),x=n("55Ip"),C=n("Ty5D"),E=n("J4zp"),k=n.n(E),S=n("TyAF"),N=n("pVnL"),R=n.n(N),P=n("QILm"),O=n.n(P),D=n("RIqP"),j=n.n(D);function M(e){var t=e.duration,n=void 0===t?100:t,o=e.color,c=void 0===o?"#e2e8f0":o,l=Object(r.useState)([]),s=k()(l,2),i=s[0],u=s[1];!function(e,t,n){Object(r.useLayoutEffect)((function(){var r=null;return e>0&&(clearTimeout(r),r=setTimeout((function(){n(),clearTimeout(r)}),4*t)),function(){return clearTimeout(r)}}),[e,t,n])}(i.length,n,(function(){return u([])}));return a.a.createElement("div",{duration:n,color:c,onMouseDown:function(e){var t=e.currentTarget.getBoundingClientRect(),n=t.width>t.height?t.width:t.height,r={x:e.pageX-t.x-n/2-window.scrollX,y:e.pageY-t.y-n/2-window.scrollY,size:n};u([].concat(j()(i),[r]))},className:"absolute inset-0"},i.map((function(e,t){return a.a.createElement("span",{className:"absolute opacity-75 rounded-full ripple-anim",key:"span"+t,style:{top:e.y,left:e.x,width:e.size,height:e.size,backgroundColor:c}})})))}function I(e){var t=e.className,n=O()(e,["className"]);return a.a.createElement("button",R()({className:"relative overflow-hidden cursor-pointer\n         flex items-center\n         rounded focus:outline-none\n         font-medium uppercase\n         ".concat(t)},n),e.children,e.disabled||a.a.createElement(M,null))}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var F=function(e){v()(n,e);var t=T(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("svg",this.props,a.a.createElement("use",{xlinkHref:"".concat(this.props.file,".svg#").concat(this.props.file,"_").concat(this.props.id)}))}}]),n}(a.a.Component);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var _=function(e){var t=e.label,n=e.value;return a.a.createElement("div",{className:"flex mt-1 text-sm ".concat(e.className)},a.a.createElement("span",{className:"text-gray-700 font-bold"},t),a.a.createElement("span",{className:"ml-1 text-gray-800"},n))},G=function(e){v()(n,e);var t=A(n);function n(){return p()(this,n),t.call(this)}return m()(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"flex items-center p-6 shadow-lg bg-white ".concat(this.props.className)},a.a.createElement("div",{className:"w-full"},a.a.createElement("h2",{className:"text-lg text-gray-800"},this.props.group.name),a.a.createElement("div",{className:"sm:flex mt-2"},a.a.createElement(_,{className:"sm:ml-4",label:"Samples:",value:this.props.group.sampleCount}),a.a.createElement(_,{className:"sm:ml-4",label:"Replicates:",value:this.props.group.replicateCount}))),a.a.createElement("div",{className:"inline-flex items-center text-gray-500"},this.props.children))}}]),n}(a.a.Component),U=n("lSNA"),B=n.n(U),H=n("aFzQ");function V(e,t){return e.reduce((function(e,n,r){return e.set(n,t[r])}),new Map)}var z=n("cDf5"),L=n.n(z);function X(e,t){var n,r=t.shift();return 1===t.length?(n=e,"object"===L()(n)&&0===Object.keys(n).length||!e[r]?e[r]=t:e[r]=[].concat(j()(e[r]),j()(t)),e):(e[r]||(e[r]={}),e[r]=X(e[r],t),e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){B()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J,K=function(){function e(){p()(this,e),this.header=[],this.rows={},this.config={multiHeader:""},Object(H.l)(this)}return m()(e,[{key:"loadFromObject",value:function(e,t){Object.assign(this.config,t),this.header=e.header,this.rows=e.rows}},{key:"getRow",value:function(e){return this.rows[e]}},{key:"getRowAsGroups",value:function(e,t){var n=this;if(!this.config.multiHeader)return console.error("The groupBy option of getRow is only supported in multi-header dataframes"),null;var r={};return this.rows[e].reduce((function(e,a,o){var c=n.header[o].split(n.config.multiHeader).slice(0,t+1).join(n.config.multiHeader);r[c]||(r[c]=c.split("*"));var l=r[c];return e.has(l)||e.set(l,[]),e.get(r[c]).push(a),e}),new Map)}},{key:"getRowAsMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n?this.header.map((function(e){return e.split(t.config.multiHeader)})):this.header;return V(r,this.rows[e])}},{key:"getRowAsTree",value:function(e){var t=this,n=this.rows[e];return this.header.reduce((function(e,r,a){var o=r.split(t.config.multiHeader),c=o[0],l=o[1];return e[c]?e[c][l]?e[c][l].push(n[a]):e[c][l]=[n[a]]:e[c]=B()({},l,[n[a]]),e}),{})}},{key:"getRows",value:function(e){var t=this;return e.reduce((function(e,n){return W(W({},e),{},B()({},n,t.rows[n]))}),{})}},{key:"getColumnByIndex",value:function(e,t){return this.header[e].split(t)}},{key:"addColumn",value:function(e,t){var n=this;this.header.push(e),t.forEach((function(e){var t=k()(e,2),r=t[0],a=t[1];n.rows[r]?n.rows[r].push(a):console.warn("".concat(r," is not a known gene accession"))}))}},{key:"addRow",value:function(e,t){this.rows[e]=t}},{key:"clearData",value:function(){this.header=[],this.rows={}}},{key:"removeColumn",value:function(e){var t=this,n=this.colNames.reduce((function(n,r,a){return t.config.multiHeader&&(r=r.split(t.config.multiHeader)),r.includes(e)&&n.push(a),n}),[]),r=this.colNames.filter((function(e,t){return!n.includes(t)})),a=Object.entries(this.rows).reduce((function(e,t){var r=k()(t,2),a=r[0],o=r[1].filter((function(e,t){return!n.includes(t)}));return e[a]=o,e}),{});this.header=r,this.rows=a}},{key:"dataFrametoString",value:function(e){var t=this,n="Gene-ID"+e;return n+=this.header.join(e),n+="\n",Object.keys(this.rows).forEach((function(r){n+=r+e,n+=t.rows[r].join(e),n+="\n"})),n}},{key:"rowNames",get:function(){return Object.keys(this.rows)}},{key:"colNames",get:function(){return j()(this.header)}},{key:"colGroups",get:function(){var e=this;return this.header.map((function(t){return t.split(e.config.multiHeader)}))}},{key:"headerObject",get:function(){var e=this,t=Array.from(this.colNames.map((function(t){return t.split(e.config.multiHeader)}))).reduce(X,{});return console.log(t),t}},{key:"hasData",get:function(){return this.colNames.length>0}}]),e}(),$=new K,Y=new K;function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Q=Object(S.a)(J=function(e){v()(n,e);var t=Z(n);function n(){var e;return p()(this,n),(e=t.call(this)).onCardDeleteClick=function(e){$.removeColumn(e)},e.state={showGroup:!1},e}return m()(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"relative w-full ".concat(this.props.className||"")},this.dataStats.map((function(t,n){return a.a.createElement(G,{className:"mt-6 first:mt-0",key:"".concat(t.name,"-").concat(n),group:t},a.a.createElement(I,{className:"group p-1 rounded-full",onClick:function(){return e.onCardDeleteClick(t.name)}},a.a.createElement(F,{file:"hero-icons",id:"trash",className:"w-6 h-6 group-hover:text-pink-700"})))})))}},{key:"dataStats",get:function(){return Object.entries($.headerObject).map((function(e){var t=k()(e,2),n=t[0],r=t[1];return{name:n,sampleCount:Object.keys(r).length,replicateCount:Object.values(r).reduce((function(e,t){return e+t.length}),0)}}))}}]),n}(a.a.Component))||J;function ee(){var e=Object(C.f)().path;return a.a.createElement(C.c,null,a.a.createElement(C.a,{exact:!0,path:e,component:Q}))}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ne=function(e){v()(n,e);var t=te(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("main",{className:"flex justify-center mr-6 py-10 px-6 md:px-12 w-full"},this.props.children)}}]),n}(a.a.Component);function re(){return a.a.createElement(ne,null,a.a.createElement(ee,null))}var ae=n("qT3F"),oe=n.n(ae);function ce(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ie=window.Plotly,ue=oe()(ie),fe=Object(r.createContext)({hoveredGene:""}),pe=function(e){v()(n,e);var t=se(n);function n(){var e;return p()(this,n),(e=t.call(this)).onPlotHover=function(t){var n=t.points;if(!(1!==n.length||e.props.plot.accessions.length<=1)){var r=n[0].fullData.name;e.setState({name:r})}},e.onPlotUnhover=function(){e.setState({name:""})},e.state={name:""},e}return m()(n,[{key:"componentDidMount",value:function(){this.resizeObserver=new ResizeObserver((function(e){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;window.Plotly.Plots.resize(r.target)}}catch(e){n.e(e)}finally{n.f()}})),this.resizeObserver.observe(this.plot.el)}},{key:"componentWillUnmount",value:function(){this.resizeObserver.unobserve(this.plot.el)}},{key:"render",value:function(){var e=this;return a.a.createElement(fe.Provider,{value:{hoveredGene:this.state.name}},a.a.createElement("figure",{className:this.props.className},a.a.createElement(ue,R()({onHover:this.onPlotHover,onUnhover:this.onPlotUnhover,ref:function(t){return e.plot=t}},this.props.plot)),a.a.createElement("div",{className:"flex flex-wrap gap-x-10 mx-20"},this.props.children)))}}]),n}(a.a.Component);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var me=function(e){v()(n,e);var t=he(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){var e=this;return a.a.createElement(fe.Consumer,null,(function(t){var n,r,o=t.hoveredGene;return a.a.createElement("figcaption",{className:"flex flex-col py-5 mt-2\n                 border-t-2 hover:border-yellow-600\n                 hover:bg-yellow-100\n                 ".concat(o&&!o.includes(e.props.accession)?"opacity-50":"","\n                 ").concat(o.includes(e.props.accession)?"bg-yellow-100":"","\n                 text-justify text-gray-800 text-sm"),style:{borderColor:null!==(n=e.props.color)&&void 0!==n?n:""}},a.a.createElement("div",{className:"font-semibold text-base",style:{color:null!==(r=e.props.color)&&void 0!==r?r:""}},e.props.accession),a.a.createElement("div",{className:"flex items-center mt-2"},a.a.createElement("div",null,j()(e.props.caption.keys()).map((function(e){return a.a.createElement("div",{key:e,className:"ml-2 py-1 uppercase text-yellow-700"},e)}))),a.a.createElement("div",null,j()(e.props.caption.values()).map((function(e,t){return a.a.createElement("div",{key:t,className:"ml-5 py-1"},e)})))))}))}}]),n}(a.a.Component),de=n("VphZ");function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){B()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=["00","01","02","03","04","05","06","07","08","09","11"],be=["#c7566f","#57bf67","#845ec9","#90b83d","#d3a333","#c363ab","#4a7c38","#adab63","#698ccc","#c94f32","#826627","#52b8a4","#d88e61"],we=["solid","dot","dash","longdash","dashdot","longdashdot"],xe=["circle","square","diamond","cross","triangle-up","pentagon"];function Ce(e,t,n){return{title:{text:n,font:{family:"ABeeZee",size:24},y:.9},showlegend:e,legend:{orientation:"h",x:0,y:-.3},yaxis:{title:{text:"count [raw]"},hoverformat:".2f"},xaxis:{tickangle:"auto",dtick:1},colorway:be}}function Ee(e,t){var n=e[0];return{data:ke($.getRowAsTree(n),n,t),layout:Ce(t.showlegend,t.countUnit,t.plotTitle),config:t.config,accessions:e,showCaption:t.showCaption,plotId:t.plotId}}function ke(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],c="bars"===n.plotType?"bar":"scatter",l=1;return Object.keys(e).forEach((function(n,s){var i=a?t:n,u=[[],[]],f=[],p=[];ge.filter((function(t){return Object.keys(e[n]).includes(t)})).forEach((function(t){u[0].push("G".concat(l)),u[1].push(t),f.push(Object(de.b)(e[n][t])),p.push(Object(de.a)(e[n][t]))})),l++;var h=!a||!(s>0);o.push(Se(u,f,p,i,c,h,r))})),o}function Se(e,t,n,r,a,o,c,l){return ye(ye({x:e,y:t,error_y:{type:"data",array:n,visible:!0},type:a,name:r,showlegend:o},c&&{line:c}),l&&{marker:l})}var Ne,Re=n("4b23"),Pe=new(function(){function e(){p()(this,e),this.plots=[],this._image=null,this.countUnit=null,Object(H.l)(this)}return m()(e,[{key:"loadCountUnit",value:function(e){this.countUnit=e}},{key:"clearImage",value:function(){this._image=null}},{key:"loadImage",value:function(e){this._image=e}},{key:"clearPlots",value:function(){this.plots=[]}},{key:"deletePlot",value:function(e){var t=this.plots.findIndex((function(t){return t.plotId===e}));this.plots.splice(t,1)}},{key:"addBarPlot",value:function(e,t){1===e.length?this.plots.push(Ee(e,t)):e.length>1&&this.plots.push(function(e,t){var n=[];e.forEach((function(e){var r=$.getRowAsGroups(e,1),a=[[],[]],o=[],c=[],l=0,s="";r.forEach((function(e,t){t[0]!==s&&l++,s=t[0],a[0].push("G".concat(l)),a[1].push(t[1]),o.push(Object(de.b)(e)),c.push(Object(de.a)(e))})),n.push(Se(a,o,c,e,"bar",t.showlegend))}));var r=Ce(t.showlegend,t.countUnit,t.plotTitle);return{data:n,layout:r,config:t.config,accessions:e,showCaption:t.showCaption,plotId:t.plotId}}(e,t))}},{key:"addIndivualCurvesPlot",value:function(e,t){1===e.length?this.plots.push(Ee(e,t)):e.length>1&&this.plots.push(function(e,t){var n=[];e.forEach((function(e,r){var a=$.getRowAsTree(e),o={color:be[r]};n.push.apply(n,j()(ke(a,e,t,o,!0)))}));var r=Ce(t.showlegend,t.countUnit,t.plotTitle);return{data:n,layout:r,config:t.config,accessions:e,showCaption:t.showCaption,plotId:t.plotId}}(e,t))}},{key:"addStackedCurvePlot",value:function(e,t){this.plots.push(function(e,t){var n=[],r=0,a=0,o=null,c=null;e.forEach((function(l){var s=$.getRowAsTree(l);Object.keys(s).forEach((function(i){var u=i,f=[],p=[],h=[];e.length>1&&(o={color:be[r],dash:we[a]},c={symbol:xe[a]},u="".concat(i," - ").concat(l)),"group"===t.colorBy?r++:a++,ge.filter((function(e){return Object.keys(s[i]).includes(e)})).forEach((function(e){f.push(e),p.push(Object(de.b)(s[i][e])),h.push(Object(de.a)(s[i][e]))})),n.push(Se(f,p,h,u,"scatter",t.showlegend,o,c))})),"group"===t.colorBy?(r=0,a++):(r++,a=0)}));var l=Ce(t.showlegend,t.countUnit,t.plotTitle);return{data:n,layout:l,config:t.config,accessions:e,showCaption:t.showCaption,plotId:t.plotId}}(e,t))}},{key:"addPlot",value:function(e,t){switch(t.countUnit=this.countUnit,t.plotId=Object(Re.a)(),t.config=this.config(t.plotId),t.plotType){case"bars":this.addBarPlot(e,t);break;case"individualCurves":this.addIndivualCurvesPlot(e,t);break;case"stackedCurves":this.addStackedCurvePlot(e,t)}}},{key:"config",value:function(e){var t=this;return{responsive:!0,toImageButtonOptions:{format:"svg"},displaylogo:!1,modeBarButtonsToAdd:[{name:"Delete plot",icon:{width:21,height:21,path:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},click:function(){t.deletePlot(e)}}]}}},{key:"hasImage",get:function(){return!!this.image}},{key:"image",get:function(){return this._image}},{key:"hasPlots",get:function(){return this.plots.length>0}}]),e}());function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){B()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Me,Ie=Object(S.a)(Ne=function(e){v()(n,e);var t=je(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return Pe.plots.map((function(e){return a.a.createElement(pe,{key:e.plotId,className:"relative flex flex-col m-3 py-6 w-full resize-x shadow-outer overflow-auto bg-white",plot:De({},e)},e.showCaption&&e.accessions.map((function(t,n){return a.a.createElement(me,{key:"accession-".concat(n),accession:t,caption:Y.getRowAsMap(t),color:e.accessions.length>1?be[n]:null})})))}))}}]),n}(a.a.Component))||Ne;function Te(){var e=Object(C.f)().path;return a.a.createElement(C.c,null,a.a.createElement(C.a,{exact:!0,path:e,component:Ie}))}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Ae=Object(S.a)(Me=function(e){v()(n,e);var t=Fe(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"flex flex-col xl:flex-row max-w-screen"},a.a.createElement("main",{className:"flex flex-wrap w-full"},Pe.image&&a.a.createElement("div",{className:"flex justify-center items-center m-3 w-full resize-x overflow-auto shadow-outer bg-white"},a.a.createElement("img",{src:Pe.image})),this.props.children))}}]),n}(a.a.Component))||Me;function _e(){return a.a.createElement(Ae,null,a.a.createElement(Te,null))}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Ue=function(e){v()(n,e);var t=Ge(n);function n(){var e;return p()(this,n),(e=t.call(this)).defaultContainerClass="\n    ",e}return m()(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"fixed z-40 inset-0 flex justify-center items-center outline-none focus:outline-none"},a.a.createElement("div",{className:this.props.className},this.props.children)),a.a.createElement("div",{className:"opacity-25 fixed inset-0 z-30 ".concat(this.props.overlayClass),onClick:this.props.onClick}))}}]),n}(a.a.Component);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var He=function(e){v()(n,e);var t=Be(n);function n(){return p()(this,n),t.call(this)}return m()(n,[{key:"render",value:function(){var e;return this.props.showModal&&a.a.createElement(Ue,{className:"shadow-lg rounded-lg bg-white ".concat(null!==(e=this.props.className)&&void 0!==e?e:""),overlayClass:"bg-black",onClick:this.props.hideModal},a.a.createElement("div",{className:"flex items-center justify-between p-6 rounded-t text-gray-800"},a.a.createElement("h2",{className:"uppercase w-full text-center text-base sm:text-xl md:text-2xl font-semibold"},this.props.title),a.a.createElement(I,{onClick:this.props.hideModal,className:"group"},a.a.createElement(F,{file:"hero-icons",id:"close",className:"w-6 h-6 group-hover:text-pink-700"}))),this.props.children)}}]),n}(a.a.Component);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ze=function(e){v()(n,e);var t=Ve(n);function n(){var e;return p()(this,n),(e=t.call(this)).onInputFocus=function(t){e.setState({focus:!0}),e.props.onFocus&&e.props.onFocus(t)},e.onInputBlur=function(t){e.setState({focus:!1}),e.props.onBlur&&e.props.onBlur(t)},e.state={focus:!1,hover:!1},e}return m()(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:this.props.className,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})}},a.a.createElement("input",R()({},this.props,{className:"py-3 px-4 w-full rounded border-2 border-gray-300 hover:border-blue-500 focus:border-blue-600 shadow-xs text-gray-800 text-sm focus:outline-none focus:bg-white",id:this.props.label,onBlur:this.onInputBlur,onFocus:this.onInputFocus})),this.props.label&&!this.props.labelPosition&&a.a.createElement("label",{htmlFor:this.props.label,className:"px-1 py-1 text-sm\n             ".concat(this.state.focus?"text-blue-600":this.state.hover?"text-gray-800":"text-gray-600")},this.props.label))}}]),n}(a.a.Component);function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Xe=function(e){v()(n,e);var t=Le(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement(ze,{className:this.props.className,type:"number",label:this.props.label,value:this.props.value,placeholder:this.props.placeholder,max:this.props.max,min:this.props.min,required:this.props.required,step:this.props.step,onBlur:this.props.onBlur,onChange:this.props.onChange,onClick:this.props.onClick,onFocus:this.props.onFocus})}}]),n}(a.a.Component);function qe(e){var t=e.className,n=e.options,o=O()(e,["className","options"]),c=Object(r.useState)(!1),l=k()(c,2),s=l[0],i=l[1],u=Object(r.useState)(!1),f=k()(u,2),p=f[0],h=f[1];return a.a.createElement("div",{className:t,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)}},a.a.createElement("select",R()({},o,{id:e.label||e.id,className:"py-3 px-4 w-full rounded border-2 border-gray-300 hover:border-blue-500 focus:border-blue-600 shadow-xs bg-white text-gray-800 text-sm focus:outline-none",onFocus:function(){return i(!0)},onBlur:function(){return i(!1)}}),null==n?void 0:n.map((function(e){var t;return a.a.createElement("option",{key:e.value,value:e.value,disabled:e.disabled},null!==(t=e.label)&&void 0!==t?t:e.value)}))),a.a.createElement("label",{htmlFor:e.label||e.id,className:"px-1 py-1 text-sm\n           ".concat(s?"text-blue-600":p?"text-gray-800":"text-gray-600")},e.label))}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Je=function(e){v()(n,e);var t=We(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement(ze,{className:this.props.className,type:"text",label:this.props.label,value:this.props.value,placeholder:this.props.placeholder,onBlur:this.props.onBlur,onChange:this.props.onChange,onClick:this.props.onClick,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown})}}]),n}(a.a.Component);function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var $e=function(e){v()(n,e);var t=Ke(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"flex flex-col flex-auto overflow-hidden overflow-y-scroll"},a.a.createElement("div",{className:"flex p-5 font-semibold bg-yellow-200 uppercase"},a.a.createElement("div",{className:"px-5 w-2/6"},"Group"),a.a.createElement("div",{className:"px-5 w-2/6"},"Sample"),a.a.createElement("div",{className:"px-5 w-1/6 text-center"},"Replicate"),a.a.createElement("div",{className:"px-5 w-1/6 text-center"},"Count [raw]")),this.props.geneCounts.map((function(e){var t=e.group,n=e.sample,r=e.replicate,o=e.count;return a.a.createElement("div",{className:"flex p-5 odd:bg-gray-100 hover:bg-yellow-100",key:"".concat(t,"-").concat(n,"-").concat(r)},a.a.createElement("div",{className:"px-5 w-2/6"},t),a.a.createElement("div",{className:"px-5 w-2/6"},n),a.a.createElement("div",{className:"px-5 w-1/6 text-center"},r),a.a.createElement("div",{className:"px-5 w-1/6 text-center"},o))})))}}]),n}(r.Component);function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Ze=function(e){v()(n,e);var t=Ye(n);function n(){var e;return p()(this,n),(e=t.call(this)).computeGeneView=function(){var t=new RegExp(e.state.searchId.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"i"),n=$.rowNames.reduce((function(e,n){var r,a=n.search(t)>-1,o=null!==(r=Y.getRowAsMap(n))&&void 0!==r?r:new Map,c=!!o&&Array.from(o.values()).some((function(e){return e.search(t)>-1}));return(a||c)&&e.push({accession:n,geneInfo:o}),e}),[]),r=parseInt(e.state.countView),a=(e.state.pageOffset-1)*r,o=e.state.pageOffset*r,c=n.slice(a,o),l=Math.ceil(n.length/e.state.countView)||1;e.setState({geneView:c,pageMax:l})},e.onDisplayCountSelect=function(t){var n=t.target.value;e.setState({countView:n})},e.onGeneSearchSubmit=function(t){"Enter"===t.key&&e.setState({pageOffset:1,searchId:t.target.value})},e.onPageOffsetChange=function(t){var n=t.target.value;(n<=0||n>e.state.pageMax)&&(n=e.state.pageOffset),e.setState({pageOffset:n})},e.selectGene=function(t){var n;if(t){var r=$.getRowAsMap(t,!0);n=j()(r.entries()).map((function(e){var t=k()(e,2),n=k()(t[0],3);return{group:n[0],sample:n[1],replicate:n[2],count:t[1]}}))}e.setState({selectedGene:t,selectedGeneCounts:n})},e.state={geneView:[],searchId:"",pageOffset:1,pageMax:1,countView:20,selectedGene:"",selectedGeneCounts:[]},e}return m()(n,[{key:"componentDidMount",value:function(){this.disposeGeneViewListener=Object(H.f)(this.computeGeneView)}},{key:"componentDidUpdate",value:function(e,t){t.searchId===this.state.searchId&&t.pageOffset===this.state.pageOffset&&t.countView===this.state.countView||this.computeGeneView()}},{key:"componentWillUnmount",value:function(){this.disposeGeneViewListener()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"m-6"},a.a.createElement("div",{className:"mt-4 flex flex-col lg:flex-row bg-white px-6 py-5"},a.a.createElement(Je,{className:"lg:w-3/4 w-full",id:"gene-browser-search",label:"Search accession",onKeyDown:this.onGeneSearchSubmit}),a.a.createElement("div",{className:"flex flex-col flex-grow sm:flex-row"},a.a.createElement(Xe,{className:"w-full mt-4 sm:w-1/2 lg:ml-3 lg:mt-0",label:"Page ".concat(this.state.pageOffset,"/").concat(this.state.pageMax),min:1,max:this.state.pageMax,required:!0,value:this.state.pageOffset,onChange:this.onPageOffsetChange}),a.a.createElement(qe,{className:"w-full mt-4 sm:ml-3 sm:w-1/2 lg:mt-0",id:"gene-browser-search",label:"Display count",value:this.state.countView,onChange:this.onDisplayCountSelect,options:[{value:5},{value:10},{value:20},{value:50},{value:100}]}))),a.a.createElement("div",{className:"bg-white mt-6"},this.state.geneView.map((function(t){var n=t.accession,r=t.geneInfo;return a.a.createElement("div",{className:"group flex px-6 py-4 odd:bg-gray-100 hover:bg-yellow-100",key:n,onDoubleClick:function(){return e.selectGene(n)}},a.a.createElement("div",{className:"w-full"},a.a.createElement("div",{className:"font-bold"},n),0===r.size?"No information available for this gene.":a.a.createElement("div",{className:"flex mt-1 ml-4"},a.a.createElement("ul",{className:"text-yellow-700"},j()(r.keys()).map((function(e){return a.a.createElement("li",{key:e,className:"mt-1"},e)}))),a.a.createElement("ul",{className:"ml-5"},j()(r.values()).map((function(e,t){return a.a.createElement("li",{key:t,className:"mt-1"},e)}))))),a.a.createElement(I,null,a.a.createElement(F,{className:"ml-4 w-6 h-6 text-gray-500 invisible group-hover:visible",file:"hero-icons",id:"eye"})))}))),this.state.selectedGene&&a.a.createElement(He,{className:"flex flex-col w-full h-full md:w-5/6 md:h-5/6 lg:w-3/4 2xl:w-1/2",title:this.state.selectedGene,showModal:this.state.selectedGene,hideModal:function(){return e.selectGene()}},a.a.createElement($e,{geneCounts:this.state.selectedGeneCounts})))}}]),n}(r.Component);function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var et=function(e){v()(n,e);var t=Qe(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("div",null,"ToolsHome works!")}}]),n}(r.Component);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var nt=function(e){v()(n,e);var t=tt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement(C.c,null,a.a.createElement(C.a,{exact:!0,path:"/tools",component:et}),a.a.createElement(C.a,{path:"/tools/gene-browser",component:Ze}))}}]),n}(r.Component);function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var at=function(e){v()(n,e);var t=rt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement(nt,null)}}]),n}(a.a.Component);function ot(){return a.a.createElement(C.c,null,a.a.createElement(C.a,{path:"/plots",component:_e}),a.a.createElement(C.a,{path:"/data",component:re}),a.a.createElement(C.a,{path:"/tools",component:at}))}function ct(e){var t=e.className,n=e.children,r=O()(e,["className","children"]);return a.a.createElement("label",{className:"relative overflow-hidden\n       flex items-center cursor-pointer\n       rounded focus:outline-none font-medium uppercase\n       ".concat(t)},a.a.createElement("input",R()({className:"hidden",type:"file"},r)),n,a.a.createElement(M,null))}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var st=function(e){v()(n,e);var t=lt(n);function n(e){var r;return p()(this,n),(r=t.call(this,e)).toggleSwitch=function(){r.setState((function(e){return r.props.onChange(!e.switchValue),{switchValue:!e.switchValue}}))},r.state={switchValue:e.checked},r}return m()(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"relative flex items-center ".concat(this.props.className),onClick:this.toggleSwitch},a.a.createElement("div",{className:"relative flex flex-shrink-0 my-3 h-6 w-12\n             border-2 border-transparent cursor-pointer rounded-full\n             focus:outline-none focus:shadow-outline\n             transition-colors duration-200 ease-in-out\n             ".concat(this.state.switchValue?"bg-green-800":"bg-gray-300")},a.a.createElement("span",{className:"w-1/2 bg-white rounded-full\n              transition duration-200 ease-in-out\n              transform ".concat(this.state.switchValue?"translate-x-full":"translate-x-0")})),a.a.createElement("label",{htmlFor:this.props.label,className:"ml-2 text-sm\n           ".concat(this.state.focus?"text-blue-500":this.state.hover?"text-gray-800":"text-gray-600")},this.props.label))}}]),n}(a.a.Component);function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ut=function(e){v()(n,e);var t=it(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"animate-spin ".concat(this.props.className),fill:"none"},a.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z m2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}}]),n}(a.a.Component);function ft(e){return pt.apply(this,arguments)}function pt(){return(pt=u()(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e,t){n.onload=function(){return e(n.result)},n.onerror=function(){return t(n.error)}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t){var n=e.split(/\r?\n|\r/);return{header:n.shift().split(t.fieldSeparator).reduce((function(e,n,r){return r===t.rowNameColumn||(t.headerSeparator&&(n=n.split(t.headerSeparator)),e.push(n)),e}),[]),rows:n.reduce((function(e,n){if(!n)return e;var r=n.split(t.fieldSeparator),a=r.splice(t.rowNameColumn,1);return Object.assign(e,B()({},a,r))}),{})}}var mt=new(function(){function e(t){p()(this,e),this._PRELOADED={data:"",info:"",image:"",settings:""},this._tableSettings={unit:"",expression_field_sep:"\t",expression_header_sep:"*",info_field_sep:"\t"},this._isPreloading=!1,Object.assign(this._PRELOADED,t),Object(H.l)(this)}return m()(e,[{key:"loadTableSettings",value:function(e){Object.assign(this._tableSettings,e)}},{key:"preloaded",get:function(){return this._PRELOADED}},{key:"isPreloading",get:function(){return this.preloaded.data&&!$.hasData}},{key:"tableSettings",get:function(){return this._tableSettings}}]),e}())({data:"",info:"",image:"",settings:""});function dt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var gt=function(e){v()(n,e);var t=yt(n);function n(){var e;return p()(this,n),(e=t.call(this)).onUploadTablesClick=function(){var t=u()(s.a.mark((function t(n){var r,a,o,c,l,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.setState({loading:!0}),Pe.loadCountUnit(e.state.countUnit),mt.loadTableSettings({unit:e.state.countUnit}),r=j()(n.currentTarget.files),a=dt(r),t.prev=6,a.s();case 8:if((o=a.n()).done){t.next=21;break}return c=o.value,t.next=12,ft(c);case 12:if(l=t.sent,i=ht(l,{fieldSeparator:e.state.separator,rowNameColumn:e.state.accessionColumn}),0!==$.colNames.length){t.next=18;break}return u=Object.entries(i.rows).reduce((function(t,n){var r=k()(n,2),a=r[0],o=r[1];return Object.assign(t,B()({},a,[o[e.state.countColumn-1]]))}),{}),$.loadFromObject({header:["".concat(e.state.groupName,"*").concat(e.state.sampleName,"*").concat(c.name)],rows:u},{multiHeader:"*"}),t.abrupt("continue",19);case 18:$.addColumn("".concat(e.state.groupName,"*").concat(e.state.sampleName,"*").concat(c.name),Object.entries(i.rows).map((function(t){var n=k()(t,2);return[n[0],n[1][e.state.countColumn-1]]})));case 19:t.next=8;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(6),a.e(t.t0);case 26:return t.prev=26,a.f(),t.finish(26);case 29:e.setState({loading:!1}),e.props.onSave();case 31:case"end":return t.stop()}}),t,null,[[6,23,26,29]])})));return function(e){return t.apply(this,arguments)}}(),e.onHeaderSwitchClick=function(t){return e.setState({header:t})},e.onCancelButtonClick=function(){e.setState({cancel:!0}),e.props.onCancel()},e.state={groupName:"",countUnit:"raw",sampleName:"",xTickValue:0,accessionColumn:0,countColumn:0,header:!0,separator:"\t",cancel:!1,loading:!1},e}return m()(n,[{key:"render",value:function(){var e=this;return a.a.createElement("form",{className:"w-full px-6 flex-auto my-4 text-gray-600 text-lg leading-relaxed"},a.a.createElement("div",{className:"flex flex-col md:flex-row"},a.a.createElement(Je,{className:"w-full md:w-1/2",label:"Group name",value:this.state.groupName,onChange:function(t){return e.setState({groupName:t.target.value})}}),a.a.createElement(qe,{className:"w-full md:w-1/2 md:ml-2",label:"Count unit",value:this.state.countUnit,options:[{label:"Raw",value:"raw"},{label:"RPKM",value:"rpkm"},{label:"TPM",value:"tpm"}],onChange:function(t){return e.setState({countUnit:t.target.value})}})),a.a.createElement("div",{className:"flex flex-col md:flex-row mt-4"},a.a.createElement(Je,{className:"w-full md:w-1/2",placeholder:"e.g. DAS-1",label:"Sample name",value:this.state.sampleName,onChange:function(t){return e.setState({sampleName:t.target.value})}}),a.a.createElement(Je,{className:"w-full md:w-1/2 md:ml-2",placeholder:"1..N",label:"Sample X-value",value:this.state.xTickValue,onChange:function(t){return e.setState({xTickValue:t.target.value})}})),a.a.createElement("div",{className:"flex flex-col justify-center md:flex-row mt-4"},a.a.createElement(qe,{className:"w-full md:w-1/3",placeholder:"1..N",label:"separator",value:this.state.separator,options:[{label:"TAB",value:"\t"},{label:"CSV",value:","}],onChange:function(t){return e.setState({separator:t.target.value})}}),a.a.createElement(Je,{className:"w-full md:w-1/3 md:ml-2",placeholder:"1..N",label:"Gene ID column",value:this.state.accessionColumn,onChange:function(t){return e.setState({accessionColumn:t.target.value})}}),a.a.createElement(Je,{className:"w-full md:w-1/3 md:ml-2",placeholder:"1..N",label:"Expression count column",value:this.state.countColumn,onChange:function(t){return e.setState({countColumn:t.target.value})}})),a.a.createElement("div",{className:"flex flex-col justfify-center items-center mt-4 md:flex-row"},a.a.createElement(st,{className:"w-full md:w-1/4 md:ml-2",label:"Header Row",checked:this.state.header,onChange:this.onHeaderSwitchClick})),a.a.createElement("div",{className:"flex mt-6 mx-1"},a.a.createElement(ct,{className:"flex justify-center items-center py-2 px-5 primary-blue",multiple:!0,onChange:this.onUploadTablesClick},this.state.loading?a.a.createElement(ut,{className:"mr-3 h-6 w-6 text-white"}):a.a.createElement(F,{file:"hero-icons",id:"document",className:"w-6 h-6 mr-3"}),this.state.loading?"Uploading":"Upload Tables"),a.a.createElement(I,{className:"ml-3 py-2 px-5 tertiary-pink",type:"button",value:"Cancel",onClick:this.onCancelButtonClick},"Cancel")))}}]),n}(a.a.Component);function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var wt=function(e){v()(n,e);var t=bt(n);function n(){var e;return p()(this,n),(e=t.call(this)).onCountUnitSelect=function(t){e.setState({countUnit:t.target.value})},e.onFieldSeparatorChange=function(t){e.setState({fieldSeparator:t.target.value})},e.onHeaderSeparatorChange=function(t){e.setState({headerSeparator:t.target.value})},e.onFormSubmit=function(){var t=u()(s.a.mark((function t(n){var r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setState({loading:!0}),Pe.loadCountUnit(e.state.countUnit),mt.loadTableSettings({unit:e.state.countUnit,expression_field_sep:e.state.fieldSeparator,expression_header_sep:"*"}),r=n.target.files[0],a=["text/tab-separated-values","text/csv","text/plain"],r&&a.includes(r.type)){t.next=10;break}return console.error("Invalid file type: ".concat(r.type)),e.setState({loading:!1}),t.abrupt("return");case 10:(o=new FileReader).onload=function(){var t=ht(o.result,{fieldSeparator:e.state.fieldSeparator,rowNameColumn:0});$.loadFromObject(t,{multiHeader:e.state.headerSeparator})},o.onloadend=function(){e.setState({loading:!1}),e.props.onSave()},o.readAsText(r);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCancelButtonClick=function(){e.setState({cancel:!0}),e.props.onCancel()},e.state={countUnit:"raw",headerSeparator:"*",fieldSeparator:",",cancel:!1,loading:!1},e}return m()(n,[{key:"render",value:function(){return a.a.createElement("form",{className:"w-full px-6 flex-auto my-4 text-gray-600 text-lg leading-relaxed"},a.a.createElement(qe,{className:"w-full",label:"Count unit",value:this.state.countUnit,options:[{label:"Raw",value:"raw"},{label:"RPKM",value:"rpkm"},{label:"TPM",value:"tpm"}],onChange:this.onCountUnitSelect}),a.a.createElement(Je,{className:"w-full",label:"Header separator",value:this.state.headerSeparator,onChange:this.onHeaderSeparatorChange}),a.a.createElement(qe,{className:"w-full",placeholder:"1..N",label:"Field separator",value:this.state.separator,options:[{label:"CSV",value:","},{label:"TAB",value:"\t"}],onChange:this.onFieldSeparatorChange}),a.a.createElement("div",{className:"flex mt-6 mx-1"},a.a.createElement(ct,{className:"flex justify-center items-center py-2 px-5 primary-blue",onChange:this.onFormSubmit},this.state.loading?a.a.createElement(ut,{className:"mr-3 h-6 w-6 text-white"}):a.a.createElement(F,{file:"hero-icons",id:"document",className:"w-6 h-6 mr-3"}),this.state.loading?"Uploading":"Upload Table"),a.a.createElement(I,{className:"ml-3 py-2 px-5 tertiary-pink",type:"button",value:"Cancel",onClick:this.onCancelButtonClick},"Cancel")))}}]),n}(a.a.Component);function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Ct=function(e){v()(n,e);var t=xt(n);function n(){var e;return p()(this,n),(e=t.call(this)).onFieldSeparatorChange=function(t){e.setState({fieldSeparator:t.target.value})},e.onFormSubmit=function(){var t=u()(s.a.mark((function t(n){var r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setState({loading:!0}),mt.loadTableSettings({info_field_sep:e.state.fieldSeparator}),r=n.target.files[0],a=["text/tab-separated-values","text/csv","text/plain"],r&&a.includes(r.type)){t.next=9;break}return console.error("Invalid file type: ".concat(r.type)),e.setState({loading:!1}),t.abrupt("return");case 9:(o=new FileReader).onload=function(){var t=ht(o.result,{fieldSeparator:e.state.fieldSeparator,rowNameColumn:0});Y.loadFromObject(t)},o.onloadend=function(){e.setState({loading:!1}),e.props.onSave()},o.readAsText(r);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCancelButtonClick=function(){e.setState({cancel:!0}),e.props.onCancel()},e.state={fieldSeparator:",",cancel:!1,loading:!1},e}return m()(n,[{key:"render",value:function(){return a.a.createElement("form",{className:"w-full px-6 flex-auto my-4 text-gray-600 text-lg leading-relaxed"},a.a.createElement(qe,{className:"w-full",placeholder:"1..N",label:"Field separator",value:this.state.separator,options:[{label:"CSV",value:","},{label:"TAB",value:"\t"}],onChange:this.onFieldSeparatorChange}),a.a.createElement("div",{className:"flex mt-6 mx-1"},a.a.createElement(ct,{className:"flex justify-center items-center py-2 px-5 primary-blue",onChange:this.onFormSubmit},this.state.loading?a.a.createElement(ut,{className:"mr-3 h-6 w-6 text-white"}):a.a.createElement(F,{file:"hero-icons",id:"document",className:"w-6 h-6 mr-3"}),this.state.loading?"Uploading":"Upload Table"),a.a.createElement(I,{className:"ml-3 py-2 px-5 tertiary-pink",type:"button",value:"Cancel",onClick:this.onCancelButtonClick},"Cancel")))}}]),n}(a.a.Component);function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var kt=function(e){v()(n,e);var t=Et(n);function n(){var e;return p()(this,n),(e=t.call(this)).setContainerRef=function(t){e.dataListContainerRef=t},e.onListItemClick=function(t){e.setState({focus:!1}),e.props.onSelect(t)},e.onAppTextChange=function(t){e.props.onChange(t.target.value)},e.onAppTextFocus=function(t){e.setState({focus:!0}),e.props.onFocus(t)},e.onAppTextBlur=function(t){e.setState({focus:!1})},e.state={focus:!1},e.dataListContainerRef=null,e}return m()(n,[{key:"render",value:function(){var e,t,n=this;return a.a.createElement("div",{ref:this.setContainerRef,className:"relative w-full ".concat(null!==(e=this.props.className)&&void 0!==e?e:"")},a.a.createElement(Je,{label:this.props.label,value:this.props.value,onFocus:this.onAppTextFocus,onBlur:this.onAppTextBlur,onChange:this.onAppTextChange}),a.a.createElement("ul",{style:{width:this.containerWidth},className:"fixed flex flex-col justify-center items-center py-2 z-50\n             border bg-white transform -translate-y-6\n             ".concat(this.state.focus?"visible":"hidden")},0===this.props.options.length?a.a.createElement("li",null,null!==(t=this.props.noItemsMessage)&&void 0!==t?t:"No matches found"):this.props.options.map((function(e,t){return a.a.createElement("li",{key:"".concat(e,"-").concat(t),className:"px-3 w-full cursor-default hover:bg-blue-700 text-sm text-center text-gray-900 hover:text-white",value:e,onMouseDown:function(){return n.onListItemClick(e)}},e)}))))}},{key:"containerWidth",get:function(){return this.dataListContainerRef?this.dataListContainerRef.clientWidth:null}}]),n}(a.a.Component);function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Nt=function(e){v()(n,e);var t=St(n);function n(){var e,r;return p()(this,n),(r=t.call(this)).searchAccessionIds=function(e){var t=$.rowNames;r.setState({validForm:t.includes(e)});for(var n=[],a=0;a<t.length&&(t[a].includes(e)&&n.push(t[a]),!(n.length>=10));a++);r.setState({accessionIdsView:n})},r.onAccessionDataListChange=function(e,t){r.setState((function(n){var r=n.accessionIds;return r[t]=e,{accessionIds:r}})),r.searchAccessionIds(e)},r.onAccessionDatalistIconClick=function(e,t){"add"===e?r.setState((function(e){return{accessionIds:[].concat(j()(e.accessionIds),[""]),validForm:!1}})):"remove"===e&&r.setState((function(e){return{accessionIds:e.accessionIds.filter((function(e,n){return n!==t}))}}))},r.onPlotGeneButtonClick=function(e){e.preventDefault(),r.setState({loading:!0}),Pe.addPlot(r.state.accessionIds,{showlegend:r.state.showlegend,showCaption:r.state.showCaption,plotType:r.state.plotType,colorBy:r.state.colorBy,plotTitle:r.state.plotTitle}),r.setState({loading:!1}),r.props.onCancel()},r.onPlotTitleChange=function(e){r.setState({plotTitle:e.target.value})},r.onSelectPlotTypeChange=function(e){r.setState({plotType:e.target.value})},r.onSelectColorByChange=function(e){r.setState({colorBy:e.target.value})},r.state={accessionIds:[null!==(e=$.rowNames[0])&&void 0!==e?e:""],accessionIdsView:$.rowNames.slice(0,10),colorBy:"group",plotTitle:"",plotType:"bars",showlegend:!0,showCaption:Y.hasData,loading:!1,validForm:!0},r}return m()(n,[{key:"render",value:function(){var e=this;return a.a.createElement("form",{className:"overflow-y-auto w-full max-h-3xl px-6 py-4 flex-auto text-gray-600 text-lg leading-relaxed"},a.a.createElement(Je,{label:"Plot title",value:this.state.groupName,onChange:this.onPlotTitleChange}),a.a.createElement(qe,{className:"mt-4",label:"Plot type",value:this.state.plotType,options:[{label:"Bars",value:"bars"},{label:"Individual Curves",value:"individualCurves"},{label:"Stacked Curves",value:"stackedCurves"}],onChange:this.onSelectPlotTypeChange}),"stackedCurves"===this.state.plotType&&a.a.createElement(qe,{className:"mt-4",label:"Color by",value:this.state.colorBy,options:[{label:"group",value:"group"},{label:"gene",value:"gene",disabled:1===this.state.accessionIds.length}],onChange:this.onSelectColorByChange}),this.state.accessionIds.map((function(t,n){var r=e.state.accessionIds.length===n+1;return a.a.createElement("div",{key:n,className:"flex items-center mt-4"},a.a.createElement(kt,{label:r?"Accession ID":null,value:e.state.accessionIds[n],options:e.state.accessionIdsView,onChange:function(t){return e.onAccessionDataListChange(t,n)},onSelect:function(t){return e.onAccessionDataListChange(t,n)},onFocus:function(){return e.searchAccessionIds(t)}}),a.a.createElement(F,{className:"ml-4 w-12 h-12 cursor-pointer\n                     ".concat(r?"text-green-700 mb-8":"text-pink-700"),file:"hero-icons",id:r?"plus":"minus",onClick:function(){return e.onAccessionDatalistIconClick(r?"add":"remove",n)}}))})),a.a.createElement("div",{className:"mt-4 w-full md:flex"},a.a.createElement(st,{className:"w-1/2",onChange:function(t){return e.setState({showlegend:t})},checked:this.state.showlegend,label:"Legend"}),Y.hasData&&a.a.createElement(st,{className:"w-1/2 md:ml-2",onChange:function(t){return e.setState({showCaption:t})},checked:this.state.showCaption,label:"Caption"})),a.a.createElement("div",{className:"mt-8 flex justify-start w-full"},a.a.createElement(I,{className:"px-5 py-2 shadow-outer text-white\n              ".concat(this.state.validForm?"bg-blue-700":"bg-gray-700 cursor-not-allowed"),type:"Submit",disabled:!this.state.validForm,onClick:this.onPlotGeneButtonClick},this.state.loading?a.a.createElement(ut,{className:"mr-2 h-6 w-6 text-white"}):a.a.createElement(F,{file:"hero-icons",id:"chart-square-bar",className:"w-6 h-6 mr-2"}),this.state.loading?"Plotting":"Plot Gene"),a.a.createElement(I,{className:"ml-3 py-2 px-5 tertiary-pink",type:"Button",value:"Cancel",onClick:this.props.onCancel},"Cancel")))}}]),n}(r.Component);function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Pt=function(e){v()(n,e);var t=Rt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("header",{className:"flex justify-between items-center w-full text-gray-700"},a.a.createElement(I,{className:"md:hidden p-1 cursor-pointer rounded-full",type:"button",onClick:this.props.onToggle},a.a.createElement(F,{className:"w-6 h-6",file:"hero-icons",id:this.props.show?"close":"menu"})),a.a.createElement("h1",{className:"flex justify-center p-1 w-full"},a.a.createElement(x.b,{className:"font-bold text-center text-xl",to:"/"},this.props.brand)))}}]),n}(a.a.Component);function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Dt=function(e){v()(n,e);var t=Ot(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("a",R()({target:"_blank",rel:"noreferrer"},this.props),this.props.children)}}]),n}(r.Component);function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Mt=function(e){v()(n,e);var t=jt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement(x.b,{"aria-disabled":this.props.disabled,className:"flex items-center py-2 text-gray-800 text-base capitalize font-bold\n           ".concat(this.props.disabled?"pointer-events-none opacity-50":"hover:text-blue-600"),to:this.props.to},this.props.icon&&a.a.createElement(F,{file:"hero-icons",id:this.props.icon,className:"w-6 h-6 mr-2"}),this.props.name)}}]),n}(r.Component),It=function(e){v()(n,e);var t=jt(n);function n(e){var r;p()(this,n),r=t.call(this,e);var a={anchor:Dt,button:I,file:ct};return r.MenuComponent=a[e.component],r}return m()(n,[{key:"render",value:function(){return a.a.createElement("li",{key:"".concat(this.props.name)},a.a.createElement(this.MenuComponent,R()({className:"flex items-center py-2 cursor-pointer\n             text-gray-800 text-base capitalize font-bold\n             ".concat(this.props.disabled?"opacity-50 cursor-not-allowed":"hover:text-blue-600")},this.props),this.props.icon&&a.a.createElement(F,{file:"hero-icons",id:this.props.icon,className:"w-6 h-6 mr-2"}),this.props.name))}}]),n}(r.Component),Tt=function(e){v()(n,e);var t=jt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"flex flex-col items-center ".concat(this.props.className)},a.a.createElement(x.b,{className:"md:min-w-full font-bold text-lg uppercase text-gray-600",to:this.props.to},this.props.title),a.a.createElement("ul",{className:"flex flex-col items-center justify-center list-none md:min-w-full md:items-start md:ml-4"},this.props.children))}}]),n}(r.Component),Ft=n("xOOu"),At=n.n(Ft),_t=n("EUZL"),Gt=n.n(_t);function Ut(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=u()(s.a.mark((function e(t,n){var r,a,o,c,l,i,u,f,p,h,m,d,v,y,g,b,w,x,C,E,k,S,N,R,P,O,D,M,I,T,F,A,_,G,U,B,H,V,z,L,X,q,W,J,K;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=Gt.a.read(new Uint8Array(t),{type:"array"}),console.log(r.SheetNames),a=r.Sheets[r.SheetNames[0]],o=Gt.a.read(new Uint8Array(n),{type:"array"}),console.log(o.SheetNames),c=o.Sheets[o.SheetNames[0]],l=[],i=new Object,u=new Object,f=0;case 11:if(!(f<42035)){e.next=42;break}p=[],h=void 0,m=0;case 15:if(!(m<120)){e.next=38;break}if(d={c:m,r:f},v=Gt.a.utils.encode_cell(d),0!==f){e.next=22;break}l.push(c[v].v),e.next=35;break;case 22:if(1!==m){e.next=26;break}return e.abrupt("continue",35);case 26:if(0!==m){e.next=30;break}h=c[v].v,e.next=35;break;case 30:if("null"===c[v].v){e.next=34;break}p.push(c[v].v),e.next=35;break;case 34:return e.abrupt("break",38);case 35:++m,e.next=15;break;case 38:p.length&&(u[h]=p);case 39:++f,e.next=11;break;case 42:for(console.log(u["MICRO.15041.C1"]),y=new Map,g=1;g<907;++g)b={c:2,r:g},w=Gt.a.utils.encode_cell(b),x={c:5,r:g},C=Gt.a.utils.encode_cell(x),E={c:6,r:g},k=Gt.a.utils.encode_cell(E),S={c:8,r:g},N=Gt.a.utils.encode_cell(S),R={c:9,r:g},P=Gt.a.utils.encode_cell(R),O={c:12,r:g},D=Gt.a.utils.encode_cell(O),M={c:13,r:g},I=Gt.a.utils.encode_cell(M),T={c:14,r:g},F=Gt.a.utils.encode_cell(T),A=a[I].v-a[D].v,_=[a[C].v,a[k].v,"Leaf"+a[N].v,a[P].v].join("_"),A<10&&(A="0"+A),G=[_,A,a[F].v].join("*"),y.set(a[w].v,G);for(U=l.slice(2).map((function(e){return y.get(e)})),B=j()(U).sort(),H=new Object,V=0,z=Object.keys(u);V<z.length;V++){L=z[V],X=[],q=Ut(B);try{for(q.s();!(W=q.n()).done;)J=W.value,K=U.indexOf(J),X.push(u[L][K])}catch(e){q.e(e)}finally{q.f()}H[L]=X}return i.rows=H,i.header=B,console.log(B),e.abrupt("return",i);case 55:e.prev=55,e.t0=e.catch(0),console.log(e.t0);case 58:case"end":return e.stop()}}),e,null,[[0,55]])})))).apply(this,arguments)}var zt,Lt=n("Iab2");function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var qt=Object(S.a)(zt=function(e){v()(n,e);var t=Xt(n);function n(){var e;return p()(this,n),(e=t.call(this)).changeRoute=function(t){e.props.location.pathname!=="/".concat(t)&&e.props.history.push("/".concat(t))},e.onUploadReplicateTableClick=function(){e.props.showGroupModal(),e.changeRoute("data")},e.onUploadExpressionTableClick=function(){e.props.showTableModal(),e.changeRoute("data")},e.onUploadInfoMenuClick=function(){e.props.showInfoModal(),e.changeRoute("data")},e.onExportDataMenuClick=u()(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={expression:$.dataFrametoString(mt.tableSettings.expression_field_sep),info:Y.hasData?Y.dataFrametoString(mt.tableSettings.info_field_sep):null},(n=new At.a).file("GXP_settings.json",JSON.stringify(mt.tableSettings,null,2)),n.file("expression_table.txt",t.expression),t.info&&n.file("info_table.txt",t.info),Pe.image&&n.file("image.png",Pe.image.split("base64,")[1],{base64:!0}),n.generateAsync({type:"blob"}).then((function(e){Object(Lt.saveAs)(e,"GXP_data.zip")}));case 7:case"end":return e.stop()}}),e)}))),e.onImportDataMenuClick=function(){var t=u()(s.a.mark((function t(n){var r,a,o,c,l,i,u,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),r=n.target.files.item(0),a=new At.a,t.next=5,a.loadAsync(r);case 5:if((o=t.sent).files["GXP_settings.json"]){t.next=9;break}throw e.setState({loading:!1}),new Error("The provided Import does not contain a GXP_settings.json file.");case 9:if(o.files["expression_table.txt"]){t.next=12;break}throw e.setState({loading:!1}),new Error("The provided Import does not contain an expression_table.txt file.");case 12:return t.next=14,o.files["GXP_settings.json"].async("string");case 14:return c=t.sent,mt.loadTableSettings(c),t.next=18,o.files["expression_table.txt"].async("string");case 18:return l=t.sent,$.loadFromObject(ht(l,{fieldSeparator:mt.tableSettings.expression_field_sep,rowNameColumn:0}),{multiHeader:mt.tableSettings.expression_header_sep}),t.next=22,o.files["info_table.txt"];case 22:if(!(i=t.sent)){t.next=32;break}return t.t0=Y,t.t1=ht,t.next=28,i.async("string");case 28:t.t2=t.sent,t.t3={fieldSeparator:mt.tableSettings.info_field_sep,rowNameColumn:0},t.t4=(0,t.t1)(t.t2,t.t3),t.t0.loadFromObject.call(t.t0,t.t4);case 32:return t.next=34,o.files["image.png"];case 34:if(!(u=t.sent)){t.next=41;break}return t.next=38,u.async("base64");case 38:f="data:image/png;base64, "+(f=t.sent),Pe.loadImage(f);case 41:e.setState({loading:!1}),e.changeRoute("data");case 43:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onImportPotatoDataMenuClick=u()(s.a.mark((function t(){var n,r,a,o,c,l,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,console.log("fetch1:"),"https://fairdomhub.org/data_files/2765/content_blobs/7814/download",n="https://fairdomhub.org/data_files/2771/content_blobs/6908/download",r="https://cors-anywhere.herokuapp.com/",t.next=8,fetch(r+"https://fairdomhub.org/data_files/2765/content_blobs/7814/download",{method:"GET"});case 8:return a=t.sent,t.next=11,a.arrayBuffer();case 11:return o=t.sent,console.log("fetch2:"),t.next=15,fetch(r+n,{method:"GET"});case 15:return c=t.sent,t.next=18,c.arrayBuffer();case 18:return l=t.sent,console.log("start conversion"),t.next=22,Ht(o,l);case 22:i=t.sent,console.log("save to dataTable"),$.loadFromObject(i,{multiHeader:"*"}),console.log("finish"),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(1),console.log(t.t0);case 31:e.setState({loading:!1});case 32:case"end":return t.stop()}}),t,null,[[1,28]])}))),e.onClearDataMenuClick=function(){e.changeRoute("data"),$.clearData()},e.onClearPlotsMenuClick=function(){Pe.clearPlots(),e.changeRoute("plots")},e.onClearImageMenuClick=function(){Pe.clearImage(),e.changeRoute("plots")},e.onNewImageMenuClick=function(t){var n=t.target.files[0];t.target.value="";var r=new FileReader;r.onload=function(){return Pe.loadImage(r.result)},r.onloadend=function(){return e.changeRoute("plots")},r.onerror=function(e){return console.error(e)},r.readAsDataURL(n),e.changeRoute("plots")},e.onNewPlotMenuClick=function(){e.changeRoute("plots"),e.props.showPlotsModal()},e.state={exportUrl:null,loading:!1},e}return m()(n,[{key:"render",value:function(){return a.a.createElement("nav",{className:"absolute top-0 left-0 right-0 z-40 overflow-x-hidden\n           flex flex-col items-center justify-center\n           mt-20 py-5 shadow-outer rounded bg-white\n           md:relative md:flex md:flex-col\n           md:mt-0 md:items-stretch md:shadow-none\n           ".concat(this.props.show?"visible":"hidden"),onClick:this.props.onClick},(this.state.loading||mt.isPreloading)&&a.a.createElement(Ue,{className:"flex flex-col justify-center items-center rounded-lg py-4 px-6",overlayClass:"bg-gray-600"},a.a.createElement(ut,{className:"mt-2 w-20 h-20 text-blue-700"}),a.a.createElement("span",{className:"uppercase mt-4 font-semibold"},this.state.loading?"Importing Data":"Preloading Data")),a.a.createElement(Tt,{className:"mt-0",title:"Data",to:"/data"},!mt.preloaded.data&&a.a.createElement(It,{component:"button",icon:"table",name:"Upload Replicate Table",onClick:this.onUploadReplicateTableClick}),!mt.preloaded.data&&a.a.createElement(It,{component:"button",icon:"table",name:"Upload Expression Table",onClick:this.onUploadExpressionTableClick}),!mt.preloaded.info&&a.a.createElement(It,{component:"button",icon:"annotation",name:"Upload Info Table",onClick:this.onUploadInfoMenuClick}),a.a.createElement(It,{component:"button",icon:"download",name:"Export Data",onClick:this.onExportDataMenuClick}),!mt.preloaded.data&&a.a.createElement(It,{component:"file",icon:"upload",name:"Import Data",onChange:this.onImportDataMenuClick}),!mt.preloaded.data&&a.a.createElement(It,{component:"button",icon:"upload",name:"Import Potato Virus Y",onClick:this.onImportPotatoDataMenuClick}),!mt.preloaded.data&&a.a.createElement(It,{component:"button",icon:"trash",name:"Clear Data",onClick:this.onClearDataMenuClick})),a.a.createElement(Tt,{className:"mt-6",title:"Plots",to:"/plots"},a.a.createElement(It,{component:"button",icon:"chart-square-bar",name:"New Plot",disabled:!$.hasData,onClick:this.onNewPlotMenuClick}),!mt.preloaded.image&&a.a.createElement(It,{component:"file",icon:"photograph",accept:"image/*",name:"New Image",onChange:this.onNewImageMenuClick}),a.a.createElement(It,{component:"button",icon:"trash",name:"Clear Plots",disabled:!Pe.hasPlots,onClick:this.onClearPlotsMenuClick}),!mt.preloaded.image&&a.a.createElement(It,{component:"button",icon:"trash",name:"Clear Image",disabled:!Pe.hasImage,onClick:this.onClearImageMenuClick})),a.a.createElement(Tt,{className:"mt-6",title:"Tools",to:"/"},a.a.createElement(Mt,{to:"/tools/gene-browser",icon:"search",name:"Gene Browser",disabled:!$.hasData,onClick:function(){}})),a.a.createElement(Tt,{className:"mt-6",title:"Documentation",to:"/"},a.a.createElement(It,{component:"anchor",icon:"book",name:"Guide",href:"https://zendro-dev.gitbook.io/geneexpressionplots/documentation/user-manual"}),a.a.createElement(It,{component:"anchor",icon:"code",name:"API",href:"https://zendro-dev.gitbook.io/geneexpressionplots/documentation/api"}),a.a.createElement(It,{component:"anchor",icon:"document-duplicate",name:"Example Data",href:"https://github.com/usadellab/GeneExpressionPlots/tree/master/examples"})))}}]),n}(a.a.Component))||zt,Wt=Object(C.g)(qt);function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Kt=function(e){v()(n,e);var t=Jt(n);function n(){var e;return p()(this,n),(e=t.call(this)).onTopBarToggle=function(){return e.setState((function(e){return{showNav:!e.showNav}}))},e.onNavigationClick=function(){return e.setState({showNav:!1})},e.onShowGroupModal=function(){return e.setState({showGroupModal:!0})},e.onShowPlotsModal=function(){return e.setState({showPlotsModal:!0})},e.onShowTableModal=function(){return e.setState({showTableModal:!0})},e.onShowInfoModal=function(){return e.setState({showInfoModal:!0})},e.onGroupFormModalHide=function(){return e.setState({showGroupModal:!1})},e.onGroupFormCancel=function(){return e.setState({showGroupModal:!1})},e.onGroupFormSave=function(){return e.setState({showGroupModal:!1})},e.onPlotFormModalHide=function(){return e.setState({showPlotsModal:!1})},e.onPlotFormCancel=function(){return e.setState({showPlotsModal:!1})},e.onTableFormModalHide=function(){return e.setState({showTableModal:!1})},e.onTableFormCancel=function(){return e.setState({showTableModal:!1})},e.onTableFormSave=function(){return e.setState({showTableModal:!1})},e.onInfoFormModalHide=function(){return e.setState({showInfoModal:!1})},e.onInfoFormCancel=function(){return e.setState({showInfoModal:!1})},e.onInfoFormSave=function(){return e.setState({showInfoModal:!1})},e.state={showNav:!1,showGroupModal:!1,showPlotsModal:!1,showTableModal:!1,showInfoModal:!1},e}return m()(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"relative z-20 py-4 px-3 md:w-64 shadow-xl bg-white md:overflow-y-auto md:fixed md:block md:inset-y-0 md:left-0"},a.a.createElement(Pt,{onToggle:this.onTopBarToggle,show:this.state.showNav,brand:"Gene Expression Plots"}),a.a.createElement(Wt,{show:this.state.showNav,showGroupModal:this.onShowGroupModal,showPlotsModal:this.onShowPlotsModal,showTableModal:this.onShowTableModal,showInfoModal:this.onShowInfoModal,onClick:this.onNavigationClick})),a.a.createElement("div",{className:"relative md:ml-64 flex flex-col min-h-screen bg-gray-300"},this.props.children,this.state.showGroupModal&&a.a.createElement(He,{title:"Add Replicate Tables",showModal:this.state.showGroupModal,hideModal:this.onGroupFormModalHide},a.a.createElement(gt,{onSave:this.onGroupFormSave,onCancel:this.onGroupFormCancel})),this.state.showTableModal&&a.a.createElement(He,{title:"Add Expression Table",showModal:this.state.showTableModal,hideModal:this.onTableFormModalHide},a.a.createElement(wt,{onSave:this.onTableFormSave,onCancel:this.onTableFormCancel})),this.state.showInfoModal&&a.a.createElement(He,{title:"Add Info Table",showModal:this.state.showInfoModal,hideModal:this.onInfoFormModalHide},a.a.createElement(Ct,{onSave:this.onInfoFormSave,onCancel:this.onInfoFormCancel})),this.state.showPlotsModal?a.a.createElement(He,{title:"Add Plot",showModal:this.state.showPlotsModal,hideModal:this.onPlotFormModalHide},a.a.createElement(Nt,{onCancel:this.onPlotFormCancel})):null))}}]),n}(a.a.Component);function $t(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=u()(s.a.mark((function e(t,n){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return console.error(e)},e.next=3,fetch(t,n).catch(r);case 3:if((a=e.sent)&&a.ok){e.next=7;break}return console.error("Failed loading ".concat(t)),e.abrupt("return");case 7:if(o=null,e.prev=8,"blob"!==n.type){e.next=15;break}return e.next=12,a.blob();case 12:o=e.sent,e.next=34;break;case 15:if("json"!==n.type){e.next=21;break}return e.next=18,a.json();case 18:o=e.sent,e.next=34;break;case 21:if("text"!==n.type){e.next=27;break}return e.next=24,a.text();case 24:o=e.sent,e.next=34;break;case 27:if("url"!==n.type){e.next=33;break}return e.next=30,a.url;case 30:o=e.sent,e.next=34;break;case 33:throw new Error("Unsupported read method for ".concat(t));case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(8),console.error(e.t0);case 39:return o||console.error("Failed reading ".concat(t)),e.abrupt("return",o);case 41:case"end":return e.stop()}}),e,null,[[8,36]])})))).apply(this,arguments)}n.p;function Zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Qt=function(e){v()(r,e);var t,n=Zt(r);function r(){return p()(this,r),n.apply(this,arguments)}return m()(r,[{key:"componentDidMount",value:(t=u()(s.a.mark((function e(){var t,n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mt.preloaded.settings){e.next=10;break}return e.next=3,$t(mt.preloaded.settings,{type:"json"});case 3:if(!(t=e.sent)){e.next=9;break}mt.loadTableSettings(t),Pe.loadCountUnit(mt.tableSettings.unit),e.next=10;break;case 9:throw new Error("Please provide a GXP_settings.json file.");case 10:if(!mt.preloaded.data){e.next=15;break}return e.next=13,$t(mt.preloaded.data,{type:"text"});case 13:(n=e.sent)&&$.loadFromObject(ht(n,{fieldSeparator:mt.tableSettings.expression_field_sep,rowNameColumn:0}),{multiHeader:mt.tableSettings.expression_header_sep});case 15:if(!mt.preloaded.info){e.next=20;break}return e.next=18,$t(mt.preloaded.info,{type:"text"});case 18:(r=e.sent)&&Y.loadFromObject(ht(r,{fieldSeparator:mt.tableSettings.info_field_sep,rowNameColumn:0}));case 20:if(!mt.preloaded.image){e.next=25;break}return e.next=23,$t(mt.preloaded.image,{type:"url"});case 23:(a=e.sent)&&Pe.loadImage(a);case 25:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return a.a.createElement(x.a,null,a.a.createElement(Kt,null,a.a.createElement(ot,null)))}}]),r}(a.a.Component);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Qt,null)),document.getElementById("root"))}},[["7RL8",1,2]]]);
//# sourceMappingURL=main.64ad2dc5b859a63fc4fe.js.map